<nb-card>
	<nb-card-body>
		<div class="titleWrap">
			<label>Eligibility</label>
		</div>
		<p-tabView (onChange)="getApplication($event)">
			<p-tabPanel header="Applications">
				<b><h3>Eligibility</h3></b><br>
				<div class="row">
					<div class="col-md-12 ">
						<mat-form-field class="example-full-width">
							<input matInput  type="text" [value]="filterText"
							[placeholder]="filterPlaceholder" [formControl]="filterInput" />
						</mat-form-field>
					</div>
				</div>
				
				<table class="table table-striped w-auto">
					<thead>
						<tr><b><h5>Total Count:{{application_data?.length}}</h5></b></tr>
						<tr>
							<th>Application Id</th>
							<th>Student Name</th>
							<th>Email Address</th>
							<th>Selected Course</th>
							<th>Forword Letter</th>
							<th>Provisional Letter</th>
							<th>Eligblity Number</th>
							<th>Actions</th>
							<th>Raise Ticket</th>
						</tr>
					</thead>
					<tbody>
						<tr class="info" *ngFor="let application of application_data | filter:{stu_name: filterText, email: filterText, specialization: filterText, course: filterText} | paginate: { itemsPerPage: 10, currentPage: p }">
							<td>{{application?.id}}</td>
							<td>{{application?.stu_name}}</td>
							<td>{{application?.email}}</td>
							<td>{{application?.specialization}} ({{application?.course}})</td>
							<td><a (click)=downloadForewordLetter(application.pdf,application.file_name)><img src="{{serverUrl}}/front_assets/img/pdf1.png"  style="height:50px; width:50px;"></a></td>
							<td><img src="{{serverUrl}}/front_assets/img/pdf1.png"  style="height:50px; width:50px;" (click)="DownloadProvisionalLetter(application.user_id,application.id)"></td>
							<td><mat-form-field class="example-full-width">
									<input matInput placeholder="Eligbility Number" id='eligib_number{{application.id}}'>
								</mat-form-field><br>
								<span id="elignumbererror{{application.id}}"></span>
							</td>
							<td>
								<i class="fa ion-person" id='view_eligibility{{application.id}}' status="danger" nbPopover="View More" nbPopoverMode="hover" (click)="viewMore('eligibility',application.user_id,application.course_id,'new',application.id);"></i>
								<i class="fa ion-android-lock" id='documentverify{{application.id}}' nbPopover="Errata" nbPopoverMode="hover" (click)="errata(application.user_id,'self_financed');"></i>
								<i class="fa ion-checkmark" id='acceptbutton{{application.id}}' nbPopover="Accept" nbPopoverMode="hover" (click)="acceptApplication(application.user_id,application.course_id,application.id);"></i>
								<i class="fa ion-close-round" id='rejectbutton{{application.id}}' nbPopover = "Reject"  nbPopoverMode="hover" (click)="rejectApplication(application.user_id,application.course_id,application.id);"></i>
								<div *ngIf="application.requestToReupload ==true">
									<div>
										<span style="color: red;">You have requested {{application.stu_name}} to re-upload transcript !</span>
									</div>	
								</div>
							</td>
							<td>
								<i class="fa ion-email" status="info" nbPopover="Raise Ticket" nbPopoverMode="hover" (click)="Ticket(application.email);"></i>
							</td>
						</tr>
					</tbody>
				</table>
				<pagination-controls (pageChange)="p = $event"></pagination-controls>
			</p-tabPanel>
			<p-tabPanel header="Re-Uploaded Transcripts">
				<b><h3>Re-Uploaded Transcripts of Student's</h3></b><br>
				<div class="row">
					<div class="col-md-12 ">
						<mat-form-field class="example-full-width">
							<input matInput  type="text" [value]="filterText"
							[placeholder]="filterPlaceholder" [formControl]="filterInput" />
						</mat-form-field>
					</div>
				</div>
				<table class="table table-striped w-auto">
					<thead>
						<tr><b><h4>Total Count:{{application_data?.length}}</h4></b></tr>
						<tr>
							<th>Student Name</th>
							<th>Email Address</th>
							<th>Mobile Country Code</th>
							<th>Mobile</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						<tr class="info" *ngFor="let application of application_data | filter:{name: filterText, email: filterText, mobile_country_code: filterText,mobile: filterText} | paginate: { itemsPerPage: 10, currentPage: p }">
							<td>{{application?.name}}</td>
							<td>{{application?.email}}</td>
							<td>{{application?.mobile_country_code}}</td>
							<td>{{application?.mobile}}</td>
							<td><button nbButton status="info" (click)="view_reupload_transcript(application?.user_id,'self_financed')">View</button></td>
						</tr>
					</tbody>
				</table>
				<pagination-controls (pageChange)="p = $event"></pagination-controls>
			</p-tabPanel>
		</p-tabView>    
   </nb-card-body>
</nb-card>
<div>
	<p-confirmDialog #cd header="Confirmation" icon="pi pi-exclamation-triangle">
		<p-footer>
			<button type="button" pButton  label="OK" (click)="cd.accept()"></button>
		</p-footer>
	</p-confirmDialog>
</div>	